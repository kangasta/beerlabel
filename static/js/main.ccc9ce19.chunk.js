(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(55)},40:function(e,t){},42:function(e,t){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),l=a.n(i),s=a(5),o=a(6),c=a(8),m=a(7),u=a(1),h=a(9),p=a(30);function d(e){return e=Math.round(e),e=Math.min(255,e),e=Math.max(0,e)}function E(e,t){for(var a=0,n=e.length-1,r=n;r>=0;r--)a+=e[n-r]*Math.pow(t,r);return a}function g(e){return e>15?e.toString(16):"0"+e.toString(16)}function v(e){var t,a,n,r=function(e){return e>56?{r:0,g:0,b:0}:{r:d(E([-.03666201,-2.467356497,256.5915566],e)),g:d(E([.058661176,-8.013965521,273.5627425],e)),b:d(E([249081e-9,-.032194991,1.390501896,-23.81644649,184.7348285],e))}}(e);return t=r.r,a=r.g,n=r.b,"#"+g(t)+g(a)+g(n)}var b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleDrop=a.handleDrop.bind(Object(u.a)(a)),a.handleDragover=a.handleDragover.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleDragover",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleDrop",value:function(e){var t=this;e.stopPropagation(),e.preventDefault();var a=e.dataTransfer.files,n=new FileReader;switch(n.onload=function(e){var a=e.target.result;t.props.callback(a)},this.props.type){case"DataURL":n.readAsDataURL(a[0]);break;case"Text":n.readAsText(a[0]);break;default:return}}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className+" Droparea",onDragOver:this.handleDragover,onDrop:this.handleDrop},this.props.children)}}]),t}(n.Component);b.defaultProps={callback:function(){},className:"",type:"Text"};var y=b,N=(a(53),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={mainImageSrc:"",breweryLogoSrc:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getGravity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OG";return this.props.beerData.hasOwnProperty(e)?this.props.beerData[e]._text:this.props.beerData.hasOwnProperty("EST_"+e)?this.props.beerData["EST_"+e]._text:void 0}},{key:"getProperty",value:function(e){var t=e.split(".");try{return t.reduce(function(e,t){return e[t]},this.props.beerData)}catch(a){return}}},{key:"getMetricsComponent",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r.a.createElement("div",{className:"Metric"},r.a.createElement("div",{className:"Value "+(e?"":"Big")},t,r.a.createElement("span",{className:"Unit"},a)),r.a.createElement("div",{className:"Name"},e))}},{key:"getIngredients",value:function(){var e=["Water"];return t.toArray(this.props.beerData.FERMENTABLES.FERMENTABLE).forEach(function(a){var n=t.getMaltType(a.NAME._text);e.includes(n)||e.push(n)}),e.push("Hops","Yeast"),e.join(", ")}},{key:"getFullHeightStyle",value:function(){var e;try{e={height:this.props.size.h.toString()+"mm"}}catch(t){e={}}return e}},{key:"getDetails",value:function(){var e=this,t=this.props.description||this.getProperty("DESCRIPTION._text")||null;return r.a.createElement("div",{className:"Details MiddleOf",style:this.getFullHeightStyle()},r.a.createElement("div",{className:"Middle"+(t?"":" NoDescription")},t?t.split("\n\n").map(function(e){return r.a.createElement("p",{key:e,className:"Description"},e)}):null,r.a.createElement("p",{className:"Ingredients"},r.a.createElement("span",{className:"Title"},"Ingredients:")," ",this.getIngredients()),r.a.createElement("div",{className:"Logo"},r.a.createElement(y,{className:"Image"+(this.state.breweryLogoSrc?"":" Placeholder"),type:"DataURL",callback:function(t){e.setState({breweryLogoSrc:t})}},r.a.createElement("img",{alt:"Logo placeholder",src:this.state.breweryLogoSrc})))))}},{key:"getRecipe",value:function(){return r.a.createElement("div",{className:"Recipe"},r.a.createElement("h1",null,"Ingredients"),r.a.createElement("h2",null,"Fermentables"),r.a.createElement("ul",null,t.toArray(this.props.beerData.FERMENTABLES.FERMENTABLE).map(function(e){return r.a.createElement("li",{key:e.NAME._text},e.NAME._text,": ",Math.round(10*e.AMOUNT._text)/10+" kg")})),r.a.createElement("h2",null,"Hops"),r.a.createElement("ul",null,t.toArray(this.props.beerData.HOPS.HOP).map(function(e){return r.a.createElement("li",{key:e.NAME._text+e.TIME._text},e.NAME._text,": ",1e3*e.AMOUNT._text," g, ",e.USE._text.toLowerCase().match(/dry.*hop/)?"Dry-hop":Math.round(e.TIME._text).toString()+" min")})),r.a.createElement("h2",null,"Yeasts"),r.a.createElement("ul",null,t.toArray(this.props.beerData.YEASTS.YEAST).map(function(e){return r.a.createElement("li",{key:e.NAME._text},e.NAME._text,": ",1e3*e.AMOUNT._text," g")})))}},{key:"render",value:function(){var e=this;if(!this.props.beerData)return null;var a,n,i=Math.round(131.25*(Number(this.getGravity("OG"))-Number(this.getGravity("FG")))*10)/10,l=t.toArray(this.props.beerData.HOPS.HOP).filter(function(e){return!e.USE._text.toLowerCase().match(/dry.*hop/)}).map(function(t){return function(e,t,a,n,r){var i=Number(e)*Number(t)*1e3/Number(n);return 1.65*Math.pow(125e-6,Number(r)-1)*((1-Math.exp(-.04*Number(a)))/4.15)*i}(t.ALPHA._text/100,1e3*t.AMOUNT._text,t.TIME._text,e.props.beerData.BATCH_SIZE._text,e.getGravity("OG"))}).reduce(function(e,t){return Math.round(e+t)}),s=Math.round((a=t.toArray(this.props.beerData.FERMENTABLES.FERMENTABLE).map(function(t){return a=t.COLOR._text,n=t.AMOUNT._text,r=e.props.beerData.BATCH_SIZE._text,a*n*2.2046/(r/3.7854);var a,n,r}).reduce(function(e,t){return Math.round(e+t)}),2.939634*Math.pow(a,.6859)));try{n={backgroundColor:v(s),color:s>25?"#ddd":"#333"}}catch(o){n={}}return r.a.createElement("div",{className:"Label"},r.a.createElement("div",{className:"Metrics MiddleOf",style:Object.assign({},this.getFullHeightStyle(),n)},r.a.createElement("div",{className:"Middle"},this.getMetricsComponent("ABV",i,"%"),this.getMetricsComponent("IBU",l),this.getMetricsComponent("EBC",s),this.getMetricsComponent(null,this.props.container.size,this.props.container.unit))),r.a.createElement("div",{className:"SideNote",style:this.getFullHeightStyle()},"Label automatically generated"),this.getDetails(),this.getRecipe(),r.a.createElement("div",{className:"Front"},r.a.createElement(y,{className:"Image"+(this.state.mainImageSrc?"":" Placeholder"),type:"DataURL",callback:function(t){e.setState({mainImageSrc:t})}},r.a.createElement("img",{alt:"Logo placeholder",src:this.state.mainImageSrc})),r.a.createElement("div",{className:"Title"},r.a.createElement("div",{className:"Name"},this.getProperty("NAME._text")),r.a.createElement("div",{className:"Style"},this.getProperty("STYLE.NAME._text")))))}}],[{key:"toArray",value:function(e){return Array.isArray(e)?e:[e]}},{key:"getMaltType",value:function(e){return e.toLowerCase().match(/wheat/)?"Wheat malt":e.toLowerCase().match(/rye/)?"Rye malt":e.toLowerCase().match(/oat/)?"Oat malt":e.toLowerCase().match(/rice/)?"Rice malt":e.toLowerCase().match(/corn/)?"Corn malt":"Barley malt"}}]),t}(n.Component));N.defaultProps={container:{size:33,unit:"cl"}};var f=N,M=(a(54),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={data:void 0,size:{h:90,w:180},container:{size:33,unit:"cl"},override:{description:""}},a.handleInputFile=a.handleInputFile.bind(Object(u.a)(a)),a.handleControlChange=a.handleControlChange.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleInputFile",value:function(e){var t=Object(p.xml2json)(e,{compact:!0});this.setState({data:JSON.parse(t).RECIPES.RECIPE})}},{key:"handleControlChange",value:function(e){var t,a=e.target.name,n=e.target.value;switch(a){case"h":case"w":t="size";break;case"description":t="override";break;case"size":case"unit":t="container";break;default:return}this.setState(function(e){return e[t][a]=n,e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Main AppComponent",style:{height:this.state.size.h.toString()+"mm",width:this.state.size.w.toString()+"mm"}},r.a.createElement(y,{type:"Text",callback:this.handleInputFile},this.state.data?r.a.createElement(f,{beerData:this.state.data,description:this.state.override.description,container:this.state.container,size:this.state.size}):r.a.createElement("div",{className:"Label Placeholder"},"Drop beerxml here"))),r.a.createElement("div",{className:"Controls"},r.a.createElement("div",{className:"AppLogo"},r.a.createElement("img",{src:"favicon512.png",alt:"Beerlabel"})),r.a.createElement("h2",null,"Dimension"),r.a.createElement("div",{className:"Field"},r.a.createElement("label",{htmlFor:"control-h"},"Height:"),r.a.createElement("input",{type:"number",id:"control-h",name:"h",min:"0",max:"600",value:this.state.size.h,onChange:this.handleControlChange}),r.a.createElement("span",{className:"Unit"},"mm")),r.a.createElement("div",{className:"Field"},r.a.createElement("label",{htmlFor:"control-w"},"Width:"),r.a.createElement("input",{type:"number",id:"control-w",name:"w",min:"0",max:"600",value:this.state.size.w,onChange:this.handleControlChange}),r.a.createElement("span",{className:"Unit"},"mm")),r.a.createElement("h2",null,"Details"),r.a.createElement("div",{className:"Field"},r.a.createElement("label",{htmlFor:"control-size"},"Container:"),r.a.createElement("input",{type:"number",id:"control-size",name:"size",min:"0",max:"600",value:this.state.container.size,onChange:this.handleControlChange}),r.a.createElement("input",{type:"text",name:"unit",value:this.state.container.unit,onChange:this.handleControlChange})),r.a.createElement("div",{className:"Field"},r.a.createElement("label",{htmlFor:"control-description"},"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"control-description",rows:"10",name:"description",value:this.state.container.description,onChange:this.handleControlChange})),r.a.createElement("div",{className:"Button"},r.a.createElement("input",{type:"button",name:"reset",value:"Reset",onClick:function(){e.setState({data:null})}}))),r.a.createElement("div",{className:"Background"}))}}]),t}(n.Component));l.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.ccc9ce19.chunk.js.map